- 字符串是以空字符(`\0`)结尾的char类型[[C++/基础/数组|数组]]。没有空字符就不是字符串，而是字符[[C++/基础/数组|数组]]。
- 字符串常量属于静态[[存储]]类别。
- 在指定[[C++/基础/数组|数组]]大小时，要确保数组的元素个数至少比字符串长度多1(为了容纳空字符)。

# put[[C/函数]]

- puts()函数只显示字符串，而且自动在显示的字符串末尾加上换行符。

# 定义字符串

- 双引号括起来的内容称为字符串字面量，也叫做字符串常量。
- 从ANSIC标准起，如果字符串字面量之间没有间隔，或者用空白字符分隔，C会将其视为串联起来的字符串字面量。
```
//数组表示法
const char ar1[] = "limit yourself";
//指针表示法
const char * pt1 = "something is important.";

```

# 字符串与[[C/指针|指针]]

- 双引号括起来的内容被视为指向该字符串存储位置的[[C/指针|指针]]（第一个字符）
- 通常，字符串都作为可执行文件的一部分储存在数据段中。当把程序载入内存时，也载入了程序中的字符串。字符串储存在静态存储区(sianic memory)中。
- 但是，程序在开始运行时才会为该[[C++/基础/数组|数组]]分配内存。此时，才将字符串拷贝到[[C++/基础/数组|数组]]中。
- 注意，此时字符串有两个副本。一个是在静态内存中的字符串字面量，另一个是储存在 ar1数组中的字符串。
- ==字符串字面量被视为 const 数据。==
- 由于 pt1指向这个 const 数据,所以==应该把pt1声明为指向 const数据的[[C/指针|指针]]==。这意味着不能用 pt1 改变它所指向的数据，但是仍然可以改变pt1的值(即，pt1 指向的位置)。
- 如果把一个字符串字面量[[拷贝]]给一个数组，就可以随意改变数据，除非把数组声明为const。
- 总之，初始化数组把静态存储区的字符串拷贝到数组中，而[[初始化]][[C/指针|指针]]只把字符串的地址拷贝给[[C/指针|指针]]。
- 编译器可以把多次使用的相同字面量储存在一处或多处。
- 注意数组与[[C/指针|指针]]的区别

# 字符串[[输入与输出]]

- 分配空间：如果想把一个字符串读入程序，首先必须预留储存该字符串的空间。
- gets函数及其替代品。

## gets函数

```
char words[81];
gets(words);
```

- gets()函数简单易用，它读取整行输入，直至遇到换行符，然后丢弃换行符，储存其余字符，并在这些字符的末尾添加一个空字符使其成为一个C字符串。
- gets()唯一的参数是 words，它无法检查数组是否装得下输入行。
- 如果输入的字符串过长，会导致缓冲区溢出(bufer overow)，即多余的字符超出了指定的目标空间。
- 读到文件结尾返回NULL。

## gets的替代品

### fgets()函数

```
char words[14];
fgets(words,14,stdin);
```

- fgets()函数的第2个参数指明了读入字符的最大数量。如果该参数的值是n，那么fgets()将读入n-1个字符，或者读到遇到的第一个换行符为止。
- 如果 fgets()读到一个换行符，会把它储存在字符串中。这点与gets()不同，gets()会丢弃换行符。
- fgets()函数的第3个参数指明要读入的文件。如果读入从键盘输入的数据，则以stdin(标准输入)作为参数，该标识符定义在stdio.h中。
- 因为 fgets()函数把换行符放在字符串的末尾，通常与fput函数配对使用。
- 处理换行符
```
//将换行符替换为空字符
while(words[i] != '\n')
i++;
words[i] = '\0'

//丢弃多出的字符（读取但不存储输入,包括\n）
while(getchar() != '\n')
	continue;
```

### fputs函数

```
fputs(words,stdout);
```

- fputs()函数的第2个参数指明它要写入的文件。如果要显示在计算机显示器上，应使用stdout(标准输出)作为该参数。
- fput不会像put一样添加换行符在末尾。
- fputs返回指向char的[[C/指针|指针]]，但如果读到文件结尾，将返回空[[C/指针|指针]](NULL)。（该[[C/指针|指针]]保证不会指向有效的数据）。

### gets_s函数

- gets_s()只从标准输入中读取数据，所以不需要第3个参数。
- 如果gets_s()读到换行符，会丢弃它而不是储存它。
- 如果 gets_s()读到最大字符数都没有读到换行符，会执行以下几步。
- 首先把目标数组中的首字符设置为空字符，读取并丢弃随后的输入直至读到换行符或[[文件结尾]]，然后返回空[[C/指针|指针]]。接着，调用依赖实现的“处理函数”(或你选择的其他函数)，可能会中止或退出程序。

## put函数

- puts()函数很容易使用，只需把字符串的地址作为参数传递给它即可。
- puts()在显示字符串时会自动在其末尾添加一个换行符。
- 该函数在遇到空字符时就停止输出，所以必须确保有空字符。

## puts()应与 gets()配对使用，fputs()应与fgets()配对使用。

